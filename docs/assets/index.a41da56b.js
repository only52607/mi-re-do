import{_ as e,h as i,n as a,e as n,p as l,s as t}from"./index.5e15b890.js";import{d as r,a as s,o as d,c as o,w as u,f,g as p,e as c,l as y,t as m,F as g,s as v,r as k,X as h,x as _,u as w}from"./vendor.33ec9ea5.js";var q=r({props:{friendList:{type:null,required:!0},loading:{type:Boolean,required:!0}},setup:i=>(a,n)=>{const l=s("a-empty"),t=s("a-spin"),r=s("a-menu-item"),v=s("a-menu");return d(),o(v,{mode:"inline"},{default:u((()=>[i.friendList?i.loading?(d(),o(t,{key:1})):(d(!0),f(g,{key:2},p(i.friendList,((i,a)=>(d(),o(r,{key:i.id},{icon:u((()=>[c(e,{"user-id":i.id,nickname:i.nickname},null,8,["user-id","nickname"])])),default:u((()=>[y(" "+m(i.remark),1)])),_:2},1024)))),128)):(d(),o(l,{key:0}))])),_:1})}});const x=y("发消息");var b=r({props:{profile:{type:null,required:!0},friend:{type:null,required:!0},loading:{type:Boolean,required:!0}},emits:["goto-friend-session"],setup:(a,{emit:n})=>(n,l)=>{const t=s("a-empty"),r=s("a-spin"),f=s("a-card-meta"),p=s("a-divider"),y=s("a-col"),m=s("a-row"),g=s("a-button"),v=s("a-card");return a.profile&&a.friend?a.loading?(d(),o(r,{key:1})):(d(),o(v,{key:2,loading:a.loading},{cover:u((()=>[])),default:u((()=>[c(f,{title:a.profile.nickname,description:a.profile.sign},{avatar:u((()=>{var i,n;return[c(e,{"user-id":null!=(n=null==(i=a.friend)?void 0:i.id)?n:0,nickname:a.profile.nickname},null,8,["user-id","nickname"])]})),_:1},8,["title","description"]),c(p),c(m,null,{default:u((()=>[c(y,{span:20},{default:u((()=>{var e,n;return[c(i,{"user-id":null!=(n=null==(e=a.friend)?void 0:e.id)?n:0,profile:a.profile},null,8,["user-id","profile"])]})),_:1})])),_:1}),c(p),c(m,{type:"flex",justify:"center"},{default:u((()=>[c(y,{span:6},{default:u((()=>[c(g,{type:"primary",key:"send-message",onClick:l[0]||(l[0]=e=>n.$emit("goto-friend-session"))},{default:u((()=>[x])),_:1})])),_:1})])),_:1})])),_:1},8,["loading"])):(d(),o(t,{key:0}))}}),j=r({setup(e){const i=v(),r=k([]),{friends:f,state:p}=a(),y=h((()=>f.value&&0!=r.value.length?r.value[0]:0)),m=h((()=>{if(f.value&&0!=r.value.length)return f.value.find((e=>e.id==y.value))})),{profile:g,state:x,emitUpdate:j}=n(y);function K(){m.value&&(l("friend",m.value),i.push({name:"session",query:{sessionIdentityString:t([m.value.id,"friend"])}}))}return _((()=>j())),(e,i)=>{const a=s("a-col"),n=s("a-row");return d(),o(n,{style:{height:"100%"}},{default:u((()=>[c(a,{span:8,style:{height:"100%",overflow:"auto","background-color":"white"}},{default:u((()=>[c(q,{loading:"done"!=w(p),style:{height:"100%"},"friend-list":w(f),selectedKeys:r.value,"onUpdate:selectedKeys":i[0]||(i[0]=e=>r.value=e)},null,8,["loading","friend-list","selectedKeys"])])),_:1}),c(a,{span:16,style:{height:"100%",overflow:"auto"}},{default:u((()=>[c(b,{onGotoFriendSession:K,friend:w(m),loading:"done"!=w(x),profile:w(g),style:{width:"100%",height:"100%"}},null,8,["friend","loading","profile"])])),_:1})])),_:1})}}});export{j as default};
